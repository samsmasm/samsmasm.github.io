<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Explaining causation</title>
  <style>
    body {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      font-family: system-ui, sans-serif;
      background-color: #fff;
      color: #000;
      text-align: center;
    }
    #sentence {
      font-size: 1.8rem;
      margin-bottom: 1.5rem;
      max-width: 900px;
    }
    .buttons {
      display: flex;
      gap: 1rem;
    }
    button {
      font-size: 1rem;
      padding: 0.6rem 1.2rem;
      cursor: pointer;
      border: 1px solid #000;
      background: #f8f8f8;
      border-radius: 6px;
    }
    footer {
      position: absolute;
      bottom: 0;
      font-size: 0.9rem;
      color: #444;
      padding: 1rem 2rem;
      text-align: center;
      width: calc(100% - 4rem);
      box-sizing: border-box;
    }
  </style>
</head>
<body>
  <div id="sentence"></div>
  <div class="buttons">
    <button id="level1Btn">Level 1</button>
    <button id="level2Btn">Level 2</button>
  </div>
  <footer>
    Explaining causation is very important in assessments. Often it is tempting to give two events without really explaining how they are connected, especially when it seems really obvious to you, but we need to explain how they are connected. Give it a go with these sentences.
  </footer>
  <script>
    const causes1 = [
      "The rain started falling heavily",
      "The power went out across the neighborhood",
      "The road outside the school flooded",
      "The traffic slowed to a crawl",
      "The teacher was stuck in traffic",
      "The storm damaged the roof tiles",
      "The air conditioner stopped working",
      "The canteen ran out of sandwiches",
      "The delivery truck was delayed",
      "The printer jammed during report printing",
      "The Wi-Fi connection dropped suddenly",
      "The PE field became too muddy",
      "The bus route was changed for construction",
      "The janitor found a leak in the ceiling",
      "The fire alarm went off unexpectedly",
      "The heating system broke down",
      "The bell malfunctioned",
      "The lights flickered during the thunderstorm",
      "The recycling bins werenâ€™t emptied",
      "The science lab ran out of beakers",
      "The temperature dropped overnight",
      "The roof started leaking",
      "The storm warning was lifted",
      "The road was closed for maintenance",
      "The air pressure fell suddenly",
      "The internet connection failed",
      "The morning fog made it hard to see",
      "The construction work blocked the main road",
      "The strong winds knocked over a tree",
      "The heating system stopped working",
      "The timetable changed this week",
      "The canteen prices increased",
      "The power lines were damaged by wind",
      "The teacher forgot the lesson plan",
      "The projector bulb burned out",
      "The printer ran out of ink",
      "The class computers crashed",
      "The floor became slippery from rain",
      "The janitor locked the side door",
      "The delivery truck arrived early",
      "The classroom windows were left open",
      "The rainwater entered the corridor",
      "The school gate was blocked by traffic",
      "The loudspeaker system stopped working",
      "The hall lights failed during rehearsal",
      "The fan stopped spinning",
      "The main entrance was closed",
      "The science lab ran out of chemicals",
      "The classroom heater stopped working",
      "The bell rang at the wrong time",
      "The playground was closed for repairs"
    ];

    const effects1 = [
      "The PE lesson was moved indoors",
      "The morning assembly was cancelled",
      "The school bus arrived late",
      "The students arrived early",
      "The substitute teacher took over the class",
      "The projector stopped working",
      "The presentation had to be postponed",
      "The power was restored after an hour",
      "The classroom felt too hot to focus",
      "The janitor set up warning signs in the hallway",
      "The floor was covered with wet footprints",
      "The cleaning staff brought in extra mops",
      "The lunch line got longer than usual",
      "The cafeteria introduced a new menu",
      "The cleaning crew emptied the recycling bins",
      "The experiment had to be rescheduled",
      "The reports were handed in late",
      "The class photo session was postponed",
      "The parents waited outside the fence",
      "The students arrived at the wrong stop",
      "The sports practice was cancelled",
      "The outdoor event was postponed",
      "The playground became muddy",
      "The PE equipment was stored away",
      "The cafeteria ran out of drinks",
      "The class moved to another room",
      "The power came back on",
      "The test started late",
      "The meeting was rescheduled",
      "The floor was cleaned again",
      "The lights were replaced",
      "The lesson continued after a delay",
      "The janitor fixed the heater",
      "The teacher borrowed materials from another class",
      "The noise in the hallway increased",
      "The students waited for instructions",
      "The windows were closed",
      "The students moved to the library",
      "The next lesson was shortened",
      "The classroom cooled down",
      "The chairs were rearranged",
      "The main gate was reopened",
      "The science lesson ended early",
      "The staff meeting started late",
      "The students were dismissed early",
      "The substitute took attendance",
      "The power flickered back on",
      "The janitor reopened the hallway",
      "The PE lesson was cancelled",
      "The group presentation was delayed",
      "The rain stopped before lunch"
    ];

    const events2 = [];

    let lastPair = [];

    function randomPairLevel1() {
      const a = causes1[Math.floor(Math.random() * causes1.length)];
      const b = effects1[Math.floor(Math.random() * effects1.length)];
      return [a, b];
    }

    function randomPairLevel2() {
      let first, second;
      do {
        first = Math.floor(Math.random() * events2.length);
        second = Math.floor(Math.random() * events2.length);
      } while (first === second || lastPair.includes(first) || lastPair.includes(second));
      lastPair = [first, second];
      return [events2[first], events2[second]];
    }

    function makeSentence(level) {
      let a, b;
      if (level === 1) {
        [a, b] = randomPairLevel1();
      } else {
        [a, b] = randomPairLevel2();
      }
      const first = a.charAt(0).toUpperCase() + a.slice(1).replace(/\.$/, '');
      const bTrimmed = b.replace(/\.$/, '');
      const second = bTrimmed.startsWith('I ') ? bTrimmed : bTrimmed.charAt(0).toLowerCase() + bTrimmed.slice(1);
      document.getElementById('sentence').textContent = `${first} so ${second}. This happened because...`;
    }

    document.getElementById('level1Btn').addEventListener('click', () => makeSentence(1));
    document.getElementById('level2Btn').addEventListener('click', () => makeSentence(2));

    window.addEventListener('keydown', e => {
      if (e.code === 'Space' && document.activeElement.tagName !== 'TEXTAREA') {
        e.preventDefault();
        makeSentence(1);
      }
    });

    makeSentence(1);
  </script>
</body>
</html>
